package io.tripovan.voltage.communication

import java.math.BigInteger

object ObdCommands {
    val obdAtz = "ATZ \r\n"
    val obdAte = "ATE0 \r\n"
    val obdAtsp = "ATSP0 \r\n"

    val cells = arrayOf(
        "224181",
        "224182",
        "224183",
        "224184",
        "224185",
        "224186",
        "224187",
        "224188",
        "224189",
        "22418A",
        "22418B",
        "22418C",
        "22418D",
        "22418E",
        "22418F",
        "224190",
        "224191",
        "224192",
        "224193",
        "224194",
        "224195",
        "224196",
        "224197",
        "224198",
        "224199",
        "22419A",
        "22419B",
        "22419C",
        "22419D",
        "22419E",
        "22419F",
        "224200",
        "224201",
        "224202",
        "224203",
        "224204",
        "224205",
        "224206",
        "224207",
        "224208",
        "224209",
        "22420A",
        "22420B",
        "22420C",
        "22420D",
        "22420E",
        "22420F",
        "224210",
        "224211",
        "224212",
        "224213",
        "224214",
        "224215",
        "224216",
        "224217",
        "224218",
        "224219",
        "22421A",
        "22421B",
        "22421C",
        "22421D",
        "22421E",
        "22421F",
        "224220",
        "224221",
        "224222",
        "224223",
        "224224",
        "224225",
        "224226",
        "224227",
        "224228",
        "224229",
        "22422A",
        "22422B",
        "22422C",
        "22422D",
        "22422E",
        "22422F",
        "224230",
        "224231",
        "224232",
        "224233",
        "224234",
        "224235",
        "224236",
        "224237",
        "224238",
        "224239",
        "22423A",
        "22423B",
        "22423C",
        "22423D",
        "22423E",
        "22423F",
        "224240"
    )

    fun getCellVoltage(value: String):Double{
        val arr = value.split(" ")
        val a = BigInteger(arr[arr.size - 2], 16).toDouble()
        val b = BigInteger(arr[arr.size - 1], 16).toDouble()
        return (((a * 256) + b) * 5) / 65535
    }
}